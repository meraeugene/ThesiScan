<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Student Dashboard - ThesiScan</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link rel="stylesheet" href="css/studentDashboard.css" />
    <link rel="icon" type="image/png" href="images/FINAL_sub-logo.png" />
  </head>
  <body>
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="logo">
        <img src="images/FINAL_sub-logo.png" />
        <span class="logo-text">ThesiScan</span>
      </div>

      <nav class="nav-links">
        <a href="studentDashboard.html"
          ><i class="fas fa-home"></i><span class="link-text">Home</span></a
        >
        <a href="studViewProfile.html"
          ><i class="fas fa-user"></i><span class="link-text">Profile</span></a
        >
        <a href="studSearchAct.html"
          ><i class="fas fa-search"></i
          ><span class="link-text">Search Activity</span></a
        >
        <a href="studUsageSum.html"
          ><i class="fas fa-chart-line"></i
          ><span class="link-text">Usage Summary</span></a
        >
        <a href="studAccSetting.html"
          ><i class="fas fa-cog"></i><span class="link-text">Settings</span></a
        >
      </nav>

      <div class="logout-link">
        <a href="#" onclick="logout()"
          ><i class="fas fa-sign-out-alt"></i
          ><span class="link-text">Logout</span></a
        >
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="dashboard-content">
        <h1>
          Welcome to
          <img src="images/logo.png" alt="ThesiScan Logo" class="inline-logo" />
        </h1>
        <p>A Research Gateway for Students' Academic Exploration</p>

        <div class="container">
          <!-- Search Bar -->
          <div class="search-bar">
            <input
              id="searchInput"
              type="text"
              placeholder="Search thesis by title or authorâ€¦"
            />
            <button onclick="handleSearch()">Search</button>
          </div>

          <!-- Filter Section (Hidden Initially) -->
          <div id="filterSection" class="filter-section">
            <select id="programFilter">
              <option value="">Select Program/Course</option>
              <option value="BSIT">BSIT</option>
              <option value="BSES-NRM">BSES-NRM</option>
              <option value="BSES-EMT">BSES-EMT</option>
              <option value="BSME">BSME</option>
              <option value="BSEE">BSEE</option>
            </select>
            <select id="yearFilter">
              <option value="">Year of Publication</option>
              <option value="2025">2025</option>
              <option value="2024">2024</option>
            </select>
            <input id="keywords" type="text" placeholder="Keywords..." />
          </div>
        </div>
      </div>
    </div>

    <script>
      const token = localStorage.getItem("token");

      if (!token) {
        window.location.href = "./";
      }

      function logout() {
        localStorage.removeItem("token");
        localStorage.removeItem("studentId");
        window.location.href = "index.html"; // send back to role selection
      }

      const searchInput = document.getElementById("searchInput");

      function handleSearch() {
        const query = document.getElementById("searchInput").value.trim();
        const program = document.getElementById("programFilter").value || "All";
        const year = document.getElementById("yearFilter").value || "Any";
        const keywords =
          document.getElementById("keywords").value.trim() || null;

        const params = new URLSearchParams();
        params.append("program", program);
        params.append("year", year);

        if (query) {
          params.append("search", query);
        }

        if (keywords) {
          params.append("keywords", keywords);
        }

        window.location.href = `studSearchResult.html?${params.toString()}`;
      }
    </script>
  </body>
</html>
